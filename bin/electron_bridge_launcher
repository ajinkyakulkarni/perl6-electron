#!/usr/bin/env perl6

use v6;

use lib 'lib';

use Atom::Electron::App;
use Atom::Electron::BrowserWindow;

init_js();

say "Trying to bridge";
my $app = Atom::Electron::App.new;
$app.bridge;

say "bridged";

my $win1 = Atom::Electron::BrowserWindow.new(:x(100), :y(100), :width(1024), :height(768));
my $win2 = Atom::Electron::BrowserWindow.new(:width(800), :height(600), :dev_tools_enabled);

$win1.load_url("http://www.google.com");
$win2.load_url("http://www.github.com");

$win1.on('ready', sub {
  "Window open!".say;
});

$win1.on('closed', sub {
  "Window closed!".say;
});

prompt("Press any key to exit");
$app.unbridge;